<script setup>
import { ref } from 'vue';
import BaseCard from '@/components/BaseCard.vue';

// Mock data
const alerts = ref([
  {
    id: 1,
    type: 'danger',
    icon: 'üö®',
    title: 'SLA ÏúÑÎ∞ò',
    message: '24ÏãúÍ∞Ñ Ï¥àÍ≥º ÎØ∏Ï≤òÎ¶¨ Ï£ºÎ¨∏ 3Í±¥',
    count: 3,
    action: 'Ï£ºÎ¨∏ Î≥¥Í∏∞'
  },
  {
    id: 2,
    type: 'warning',
    icon: 'üì¶',
    title: 'Ïû¨Í≥† Î∂ÄÏ°±',
    message: '12Í∞ú ÏÉÅÌíàÏù¥ Ïû¨Í≥† Î∂ÄÏ°± ÏÉÅÌÉúÏûÖÎãàÎã§',
    count: 12,
    action: 'Ïû¨Í≥† Î≥¥Í∏∞'
  },
  {
    id: 3,
    type: 'warning',
    icon: '‚ö†Ô∏è',
    title: 'ÎØ∏Ï≤òÎ¶¨ Ï£ºÎ¨∏',
    message: 'Ï≤òÎ¶¨ ÎåÄÍ∏∞ Ï§ëÏù∏ Ï£ºÎ¨∏Ïù¥ ÏûàÏäµÎãàÎã§',
    count: 23,
    action: 'Ï≤òÎ¶¨ÌïòÍ∏∞'
  },
  {
    id: 4,
    type: 'info',
    icon: 'üöö',
    title: 'Î∞∞ÏÜ° ÏßÄÏó∞',
    message: '5Í±¥Ïùò Î∞∞ÏÜ°Ïù¥ ÏßÄÏó∞ÎêòÍ≥† ÏûàÏäµÎãàÎã§',
    count: 5,
    action: 'ÌôïÏù∏ÌïòÍ∏∞'
  }
]);

const getAlertClass = (type) => {
  const classes = {
    danger: 'alert-danger',
    warning: 'alert-warning',
    info: 'alert-info',
    success: 'alert-success'
  };
  return classes[type] || 'alert-secondary';
};

const handleAction = (alert) => {
  // TODO: Navigate to relevant page
};
</script>

<template>
  <div class="row mb-4">
    <div class="col-12">
      <BaseCard>
        <template #header>
          <h5 class="mb-0">‚ö†Ô∏è Í∏¥Í∏â ÏïåÎ¶º</h5>
        </template>

        <div class="alerts-container">
          <div
            v-for="alert in alerts"
            :key="alert.id"
            class="alert-item"
            :class="getAlertClass(alert.type)"
          >
            <div class="alert-content">
              <div class="alert-left">
                <span class="alert-icon">{{ alert.icon }}</span>
                <div class="alert-text">
                  <div class="alert-title">{{ alert.title }}</div>
                  <div class="alert-message">{{ alert.message }}</div>
                </div>
              </div>
              <div class="alert-right">
                <span class="alert-count badge" :class="'bg-' + alert.type">
                  {{ alert.count }}
                </span>
                <button
                  class="btn btn-sm"
                  :class="'btn-' + alert.type"
                  @click="handleAction(alert)"
                >
                  {{ alert.action }} ‚Üí
                </button>
              </div>
            </div>
          </div>
        </div>
      </BaseCard>
    </div>
  </div>
</template>

<style scoped>
.alerts-container {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.alert-item {
  border-radius: 0.5rem;
  padding: 1rem;
  border-left: 4px solid;
  transition: all 0.2s;
}

.alert-item:hover {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transform: translateX(4px);
}

.alert-danger {
  background-color: #f8d7da;
  border-left-color: #dc3545;
}

.alert-warning {
  background-color: #fff3cd;
  border-left-color: #ffc107;
}

.alert-info {
  background-color: #d1ecf1;
  border-left-color: #0dcaf0;
}

.alert-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
}

.alert-left {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex: 1;
}

.alert-icon {
  font-size: 2rem;
}

.alert-text {
  flex: 1;
}

.alert-title {
  font-weight: 600;
  font-size: 1rem;
  margin-bottom: 0.25rem;
  color: #212529;
}

.alert-message {
  font-size: 0.9rem;
  color: #6c757d;
}

.alert-right {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.alert-count {
  font-size: 1.1rem;
  font-weight: 600;
  padding: 0.4rem 0.8rem;
  min-width: 3rem;
  text-align: center;
}

.bg-danger {
  background-color: #dc3545 !important;
}

.bg-warning {
  background-color: #ffc107 !important;
  color: #000 !important;
}

.bg-info {
  background-color: #0dcaf0 !important;
}

.btn-sm {
  font-size: 0.85rem;
  padding: 0.4rem 0.8rem;
  white-space: nowrap;
}

@media (max-width: 768px) {
  .alert-content {
    flex-direction: column;
    align-items: flex-start;
  }

  .alert-right {
    width: 100%;
    justify-content: space-between;
  }
}
</style>
